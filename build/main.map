{"version":3,"sources":["webpack:///webpack/bootstrap fae3aaf45c8596481c89","webpack:///external \"mongoose\"","webpack:///external \"passport-strava\"","webpack:///./server/api/models/user.js","webpack:///./server/index.js","webpack:///external \"nuxt\"","webpack:///external \"express\"","webpack:///external \"express-session\"","webpack:///external \"cookie-parser\"","webpack:///external \"body-parser\"","webpack:///external \"passport\"","webpack:///./server/config/database.js","webpack:///./server/config/passport.js","webpack:///./server/config/auth.js","webpack:///./server/api/routes.js","webpack:///external \"strava-v3\"","webpack:///external \"multer\"","webpack:///external \"crypto\"","webpack:///external \"fs\"","webpack:///./server/api/models/activities.js","webpack:///./server/api/models/groups.js","webpack:///./server/data/strava_config.json","webpack:///./server/api/map/polylineEdgePoints.js","webpack:///./server/api/activities/activities.js","webpack:///./server/api/activities/activityFilters.js","webpack:///./nuxt.config.js"],"names":["mongoose","require","Promise","global","userSchema","Schema","strava","id","String","token","firstName","lastName","username","sex","email","city","state","profilePic","userBio","groupId","type","ObjectId","created_at","Date","updated_at","module","exports","model","Nuxt","Builder","express","session","cookieParser","bodyParser","passport","StravaStrategy","Strategy","configDB","server","host","process","env","HOST","port","PORT","connect","url","use","secret","initialize","config","dev","nuxt","builder","build","render","listen","console","log","configAuth","User","serializeUser","user","done","deserializeUser","findById","err","clientID","stravaAuth","clientSecret","callbackURL","accessToken","refreshToken","profile","nextTick","findOne","_json","firstname","lastname","newUser","now","save","multer","crypto","fs","Activity","ActivityGroup","stravaConfig","polylineEdgePoints","get","authenticate","failureRedirect","successRedirect","failureFlash","req","res","logout","redirect","groupMap","find","group","forEach","push","contentType","send","usersMap","users","post","count","Object","keys","body","length","_id","findByIdAndUpdate","$set","Types","new","handleError","json","constructor","key","hasOwnProperty","storage","diskStorage","destination","file","cb","filename","callback","pseudoRandomBytes","raw","toString","upload","limits","fileSize","single","success","path","split","userId","oldPhotoPath","oldPath","existsSync","unlink","newPath","updateQuery","locations","timeBox","findOneAndUpdate","status","query","object_type","endTime","startTimeISO","elapsedTime","start_time","elapsed_time","t","setSeconds","getSeconds","end_time","toISOString","owner_id","stravaId","object_id","activity","activities","access_token","data","edgePoints","positionPointsFromPolyline","map","polyline","newActivity","title","name","distance","duration","start_date","startPoint","endPoint","summaryPolyline","summary_polyline","newGroup","adminMail","groupName","private","groupDescription","maxDistance","activitySchema","required","Number","position","lat","lng","groupSchema","Boolean","precision","polylineDecode","str","index","coordinates","shift","result","byte","latitude_change","longitude_change","factor","Math","pow","charCodeAt","start","end","AtoB","ActivityGroups","next","mode","params","timeRange","time","setHours","curr","firstOfWeek","getDate","getDay","setDate","getTime","getFullYear","radius","rad","x","PI","getDistance","p1","p2","R","dLat","dLong","a","sin","cos","c","atan2","sqrt","d","aggregate","$match","$gt","$group","$push","$lookup","from","localField","foreignField","as","$unwind","$project","userData","__v","noUsers","loopGroups","groupIndex","noActivities","loopUsers","userIndex","notPass","loopActivities","activityCount","AtoBdistance","groupInfo","isInMaxRange","isInAny","splice","foundGroupId","i","location1","location2","maxRange","toRad","lat1","lon1","lat2","lon2","x1","x2","dLon","timeBoxArray","selectedTime","ISOtoDaySeconds","date","datetext","toTimeString","seconds","HHandMMtoSec","timeString","hms","passedTimeframesIndex","timeframe","timeframeStart","timeframeEnd","timeframes","passedTimeframeIndexes","serverMiddleware","head","meta","charset","content","hid","link","rel","href","router","base","css","vendor","extractCSS","extend","ctx","isClient","rules","enforce","test","loader","exclude","externals","context","request","plugins","src"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fae3aaf45c8596481c89","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"passport-strava\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-strava\"\n// module id = 1\n// module chunks = 0","const mongoose = require('mongoose');\n\n// user Schema\nmongoose.Promise = global.Promise;\nvar userSchema = new mongoose.Schema({\n  strava: {\n    id: String,\n    token: String,\n  },\n  firstName: String,\n  lastName: String,\n  username: String,\n  sex: String,\n  email: String,\n  city: String,\n  state: String,\n  profilePic: String,\n  userBio: String,\n  groupId: { type: mongoose.Schema.ObjectId},\n  created_at: Date,\n  updated_at: Date\n});\n\n// make this available to our users in our Node applications\nmodule.exports = mongoose.model('User', userSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/models/user.js","const { Nuxt, Builder } = require('nuxt')\nconst express = require('express')\nconst mongoose = require('mongoose');\nconst session = require('express-session')\nconst cookieParser = require('cookie-parser')\nconst bodyParser = require('body-parser')\nconst passport = require('passport')\nconst StravaStrategy = require('passport-strava').Strategy;\n\nconst configDB = require('./config/database.js');\n\nvar server = express();\n\nconst host = process.env.HOST || '0.0.0.0'\nconst port = process.env.PORT || '3000'\n\nmongoose.connect(configDB.url, () => {});\n\n// For serving static files from public directory\n// server.use(express.static('public'));\nserver.use(cookieParser());\nserver.use(bodyParser());\nserver.use(session({\n  secret: 'c4rl3ss doggo'\n}));\nserver.use(passport.initialize());\nserver.use(passport.session());\n\nrequire('./config/passport.js')(passport);\nrequire('./api/routes.js')(server, passport);\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js')\nconfig.dev = !(process.env.NODE_ENV === 'production')\n\n// Init Nuxt.js\nconst nuxt = new Nuxt(config)\n\n// Build only in dev mode\nif (config.dev) {\n  const builder = new Builder(nuxt)\n  builder.build()\n}\n\n// Give nuxt middleware to express\nserver.use(nuxt.render)\n\n// Listen the server\nserver.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 9\n// module chunks = 0","module.exports = {\n    'url' : 'mongodb://localhost/carlessDB'\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/database.js","/*eslint-disable*/\n\nconst configAuth = require('./auth.js');\nconst StravaStrategy = require('passport-strava').Strategy;\nvar User = require('../api/models/user.js');\n\nmodule.exports = function(passport){\n\tpassport.serializeUser((user, done) => {\n\t\tdone(null, user.id);\n\t});\n\t\n\tpassport.deserializeUser((id, done) => {\n\t\tUser.findById(id, (err, user) => {\n\t\t\tdone(err, user);\n\t\t});\n\t});\n\n\tpassport.use(new StravaStrategy({\n\t\tclientID: configAuth.stravaAuth.clientID,\n\t\tclientSecret: configAuth.stravaAuth.clientSecret,\n\t\tcallbackURL: configAuth.stravaAuth.callbackURL\n\t},\n\t\n\tfunction(accessToken, refreshToken, profile, done) {\n\t\t// asynchronous verification, for effect...\n\t\tprocess.nextTick(function () {\n\t\t\tUser.findOne({'strava.id': profile._json.id}, (err, user) => {\n\t\t\t\tif(err){\n\t\t\t\t\tconsole.log(\"Error\");\n\t\t\t\t\treturn done(err);\n\t\t\t\t}\n\t\t\t\tif(user){\n\t\t\t\t\treturn done(null, user);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tconsole.log(\"User \" + profile._json.firstname + \" \" + profile._json.lastname + \" saved to database.\");\n\t\t\t\t\tvar newUser = new User();\n\t\t\t\t\tnewUser.strava.id = profile._json.id;\n\t\t\t\t\tnewUser.strava.token = profile.token;\n\t\t\t\t\tnewUser.firstName = null;\n\t\t\t\t\tnewUser.lastName = null;\n\t\t\t\t\tnewUser.username = null;\n\t\t\t\t\tnewUser.sex = profile._json.sex;\n\t\t\t\t\tnewUser.email = profile._json.email;\n\t\t\t\t\tnewUser.city = profile._json.city;\n\t\t\t\t\tnewUser.state = profile._json.state;\n\t\t\t\t\tnewUser.profilePic = profile._json.profile;\n\t\t\t\t\tnewUser.userBio = null;\n\t\t\t\t\tnewUser.groupId = null;\n\t\t\t\t\tnewUser.created_at = Date.now();\n\t\t\t\t\tnewUser.updated_at = Date.now();\n\t\t\t\t\t\n\t\t\t\t\tnewUser.save((err) => {\n\t\t\t\t\t\tif(err)\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\treturn done(null, newUser);\n\t\t\t\t\t});\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t});\n  }));\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/passport.js","module.exports = {\n    'stravaAuth': {\n        'clientID': '24180',\n        'clientSecret': 'd03c440b12e127955225e74d2b24dadf2e2b0cd2',\n        'callbackURL': 'http://localhost:3000/auth/strava/callback'\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/auth.js","/*eslint-disable*/\nconst strava = require('strava-v3');\nconst multer = require('multer');\nconst crypto = require('crypto');\nconst fs = require('fs');\n\nvar User = require('../api/models/user.js');\nvar Activity = require('../api/models/activities.js');\nvar ActivityGroup = require('../api/models/groups.js');\n\nvar stravaConfig = require('./../data/strava_config.json');\n\nvar polylineEdgePoints = require('./map/polylineEdgePoints.js');\n\nvar mongoose = require('mongoose');\n\nmodule.exports = function(server, passport){\n\n  server.get('/auth/strava', passport.authenticate('strava'));\n\n  server.get('/auth/strava/callback', passport.authenticate('strava', {\n    failureRedirect: '/',\n    successRedirect: '/',\n    failureFlash: true\n  }));\n\n  server.get('/logout', function (req, res) {\n    req.logout();\n    res.redirect('/');\n  });\n\n\n\n\n\n  var groupMap = [];\n  server.get('/api/activity/groups', function (req, res) {\n    ActivityGroup.find({}, function(err, group){\n      group.forEach(function(group) {\n        groupMap.push(group);\n      });\n      res.contentType('application/json');\n      res.send(groupMap);\n      groupMap = [];\n    });\n  });\n\n\n  var usersMap = [];\n  server.get('/api/users', function (req, res) {\n    User.find({}, function(err, users){\n      users.forEach(function(user) {\n        usersMap.push(user);\n      });\n      res.contentType('application/json');\n      res.send(usersMap);\n      usersMap = [];\n    });\n  });\n\n\n server.post('/api/update_user', function(req, res) {\n  var count = Object.keys(req.body).length;\n\n  if (req.body._id) {    \n    User.findByIdAndUpdate(req.body._id,{$set:{\n      userBio: req.body.userBio,\n      groupId: (req.body.groupId) ? mongoose.Types.ObjectId(req.body.groupId): null,\n      profilePic: req.body.profilePic,\n      state: req.body.state,\n      city: req.body.city,\n      email: req.body.email,\n      sex: req.body.sex,\n      lastName: req.body.lastName,\n      firstName: req.body.firstName,\n      username: req.body.username\n    }}, {new: true}, function (err, user) {\n      if (err) return handleError(err);\n      res.json();\n    });\n  }else{\n    if(req.body.constructor === Object && Object.keys(req.body).length === 0){\n    }else{\n      for(var key in req.body) {\n        if(req.body.hasOwnProperty(key)){\n          User.findByIdAndUpdate(req.body[key]._id,{$set:{\n            userBio: req.body[key].userBio,\n            groupId: mongoose.Types.ObjectId(req.body[key].groupId),\n            profilePic: req.body[key].profilePic,\n            state: req.body[key].state,\n            city: req.body[key].city,\n            email: req.body[key].email,\n            sex: req.body[key].sex,\n            lastName: req.body[key].lastName,\n            firstName: req.body[key].firstName,\n            username: req.body[key].username\n          }}, {new: true}, function (err, user) {\n            if (err) return handleError(err);\n          });\n        }\n      }\n      res.json();\n    }\n  }\n});\n\n\n\nconst storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    return cb(null, './static/img/users/');\n  },\n  filename: function (req, file, callback) {\n    crypto.pseudoRandomBytes(16, function(err, raw) {\n      if (err) return callback(err);\n    \n      callback(null, raw.toString('hex') + '.jpg');\n    });\n  }\n});\n\nvar upload = multer({storage: storage, \n  limits: {\n      fileSize: 1000000\n  }\n});\n\nserver.post('/user/upload_avatar', upload.single('avatar'), (req, res) => {\n  if (!req.file) {\n    return res.send({\n      success: false\n    });\n\n  } else {;\n    \n    var path = req.file.path.split(\"static\");\n\n    User.findByIdAndUpdate(req.body.userId,{$set:{\n\n      profilePic: path[1]\n\n    }}, {new: true}, function (err, user) {\n      if (err) return handleError(err);\n      res.json();\n    });\n\n    var oldPhotoPath = './static/' + req.body.oldPath;\n\n    if (fs.existsSync(oldPhotoPath)) {\n      fs.unlink(oldPhotoPath, (err) => {\n        if (err) throw err;\n      });\n    }\n\n    return res.send({\n      success: true,\n      newPath: path[1]\n    })\n  }\n});\n\nserver.post('/user/delete_avatar', function(req, res) {\n  \n    User.findByIdAndUpdate(req.body.userId,{$set:{profilePic: null}}, {new: true}, function (err, user) {\n      if (err) return handleError(err);\n      res.json();\n    });\n\n    var oldPhotoPath = './static/' + req.body.oldPath;\n    \n    if (fs.existsSync(oldPhotoPath)) {\n      fs.unlink(oldPhotoPath, (err) => {\n        if (err) throw err;\n      });\n    }\n\n    return res.send({\n      success: true,\n      newPath: null\n    })\n});\n\n\n\nserver.post('/api/delete_user_from_group', function(req, res) {\n  \n    User.findByIdAndUpdate(req.body._id,{$set:{groupId: null}}, {new: true}, function (err, user) {\n      if (err) return handleError(err);\n      res.json();\n    });\n});\n\nserver.post('/api/update_group', function(req, res) {\n\n  const updateQuery = {};\n\n  if (!req.body.locations) {\n    updateQuery.locations = [];\n  }else{\n    updateQuery.locations = req.body.locations;\n  }\n\n  if (!req.body.timeBox) {\n    updateQuery.timeBox = [];\n  }else{\n    updateQuery.timeBox = req.body.timeBox;  \n  }\n  \n  ActivityGroup.findOneAndUpdate({_id: req.body._id}, {$set: updateQuery}, {new: true}, function (err, group) {\n    if (err) return handleError(err);\n    res.json();\n  });\n});\n\n\n// -------------- Webhook Events --------------\n\nserver.get('/webhook/strava/strava_callback', function(req, res){\n  res.status(200);\n  res.json({\"hub.challenge\": req.query['hub.challenge']});\n});\n\nserver.post('/webhook/strava/strava_callback', function(req, res) {\n\n  if(req.body.object_type == \"activity\"){\n\n    var userId;\n\n    function endTime(startTimeISO, elapsedTime){\n      \n        var start_time = startTimeISO; // ISO format\n        var elapsed_time = elapsedTime; // seconds\n      \n        var t = new Date(start_time);\n        t.setSeconds(t.getSeconds() + elapsed_time); // adding seconds\n      \n        var end_time = t.toISOString(); // converting time to ISO format\n      \n        return end_time;\n      \n      }\n\n    User.findOne({'strava.id': req.body.owner_id}, function (err, user){\n      if (err) console.log(\"ERROR - can't find user by strava ID\");\n\n      if(user){\n        userId = user._id;\n      }\n    });\n\n    Activity.findOne({stravaId: req.body.object_id}, function(err, activity) {\n      if (err) console.log(\"ERROR - can't find activity in database!\");\n\n      if(!activity){\n        strava.activities.get({id: req.body.object_id, 'access_token': stravaConfig.access_token}, function(err, data){\n\n          var edgePoints = polylineEdgePoints.positionPointsFromPolyline(data.map.polyline);\n\n          var newActivity = new Activity({\n            stravaId: data.id,\n            userId: mongoose.Types.ObjectId(userId),\n            title: data.name,\n            type: data.type,\n            distance: data.distance, // in meters\n            duration: data.elapsed_time, // in sec\n            endTime: endTime(data.start_date, data.elapsed_time),\n            startPoint: edgePoints.startPoint,\n            endPoint: edgePoints.endPoint,\n            map: {\n              id: data.map.id,\n              polyline: data.map.polyline,\n              summaryPolyline: data.map.summary_polyline\n            },\n            created_at: data.start_date, // ISO format\n            updated_at: data.start_date // ISO format\n\n          });\n\n          newActivity.save(function(err){\n            if(err){\n              console.log(\"ERROR - can't save activity to database!\");\n              throw err;\n            }\n          });\n\n        });\n      }\n\n    })\n  }\n})\n\n\nserver.get('/log/group', function(req, res) {\n\n  var newGroup = new ActivityGroup({\n    adminMail: \"danijel.m.js@gmail.com\",\n    groupName: \"Test grupa\",\n    private: false,\n    groupDescription: \"Grupa za testiranje CarLess aplikacije\",\n    locations: [],\n    timeBox: [],\n    maxDistance: 400,\n    created_at: Date.now(),\n    updated_at: Date.now()\n\n  });\n\n  newGroup.save(function(err){\n    if(err){\n      console.log(\"ERROR - can't save group to database!\");\n      throw err;\n    }\n  });\n});\n\n\n\n// server.get('/api/useractivities', function (req, res) {\n//   console.log(\"Hoce?\");\n\n//   strava.athlete.listActivities({'access_token':'cf9be88f3d1b6c3ebba37445b43345f14f530915'}, function(err, data){\n//     console.log(data)\n//   })\n// });\n\n// server.get('/api/polyline', function (req, res) {\n// var polyline = \"{g{wGus}cBMOFg@AS@SDI?[IW@{AFWNSG[BUIUAi@B]Qo@UWc@W[Uo@[g@Sg@a@uBiAo@KM@u@ED@I?GCCkAKMBs@Re@A_@I]@WPK?GLSGGU?KEAIBFOEFBIDOOG?EEJJ`@HGAFJZDAQ?_@BOA[MMAg@Gi@@]Ik@Cg@GW?YDWIy@@UEy@@KFETFBDBL@p@HZOBDD\";\n\n\n// console.log(object);\n// })\n\n\n// server.get('/api/logactivity', function (req, res) {\n\n//   req.body.object_id = '1183905954';\n\n//   Activity.findOne({stravaId: req.body.object_id}, function(err, activity) {\n//     if (err) console.log(\"ERROR - can't find activity in database!\");\n\n//     if(!activity){\n//       strava.activities.get({id: req.body.object_id, 'access_token':'cf9be88f3d1b6c3ebba37445b43345f14f530915'}, function(err, data){\n\n//         var edgePoints = polylineEdgePoints.positionPointsFromPolyline(data.map.polyline);\n//         console.log(data);\n//         var newActivity = new Activity({\n//           stravaId:  data.id,\n//           userId: mongoose.Types.ObjectId(\"59ee08edfc6a6c101ba66fca\"),\n//           type: data.type,\n//           distance: data.distance, // in meters\n//           duration: data.elapsed_time, // in sec\n//           endTime: endTime(data.start_date, data.elapsed_time),\n//           startPoint: edgePoints.startPoint,\n//           endPoint: edgePoints.endPoint,\n//           map: {\n//             id: data.map.id,\n//             polyline: data.map.polyline,\n//             summaryPolyline: data.map.summary_polyline\n//           },\n//           created_at: data.start_date, // ISO format\n//           updated_at: data.start_date // ISO format\n\n//         });\n\n//         newActivity.save(function(err){\n//           if(err){\n//             console.log(\"ERROR - can't save activity to database!\");\n//             throw err;\n//           }\n//         });\n\n//       });\n//     }\n\n//   })\n\n// });\n\n\n  // server.get('/api/carlessDB/logactivity1', function (req, res) {\n  //   console.log(\"Activity saved to database.\");\n  //       var newActivity = new Activity();\n  //       newActivity.userId = '5a9534ab137aae52ecd2fdc9';\n  //       newActivity.type = \"Ride\";\n  //       newActivity.distance = 4250;\n  //       newActivity.created_at = new Date();\n        \n  //       newActivity.save((err) => {\n  //         if(err)\n  //           throw err;\n  //       });\t\n  // });\n\n\n  // require('./activities/dailyLog.js')(server, User, Activity, ActivityGroup);\n\n  // require('./activities/weeklyLog.js')(server, User, Activity, ActivityGroup);\n  \n  // require('./activities/monthlyLog.js')(server, User, Activity, ActivityGroup);\n\n  // require('./activities/yearlyLog.js')(server, User, Activity, ActivityGroup);\n\n\n  require('./activities/activities.js')(server, User, Activity, ActivityGroup);\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/routes.js","module.exports = require(\"strava-v3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"strava-v3\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 17\n// module chunks = 0","const mongoose = require('mongoose');\n\n// activity Schema\nmongoose.Promise = global.Promise;\nvar activitySchema = new mongoose.Schema({\n    stravaId: String,\n    userId: { type: mongoose.Schema.ObjectId, required: true},\n    title: String,\n    type: String,\n    distance: Number,\n    duration: Number,\n    endTime: String,\n    startPoint: {\n        position: {\n            lat: String,\n            lng: String\n        }\n    },\n    endPoint: {\n        position: {\n            lat: String,\n            lng: String\n        }\n    },\n    map: {\n        id: String,\n        polyline: String,\n        summaryPolyline: String\n    },\n    created_at: Date,\n    updated_at: Date\n});\n\nmodule.exports = mongoose.model('Activity', activitySchema);\n\n\n// WEBPACK FOOTER //\n// ./server/api/models/activities.js","const mongoose = require('mongoose');\n\n// group Schema\nmongoose.Promise = global.Promise;\nvar groupSchema = new mongoose.Schema({\n  adminMail: String,\n  groupName: String,\n  private: Boolean,\n  groupDescription: String,\n  locations: [],\n  timeBox: [],\n  maxDistance: Number,\n  created_at: Date,\n  updated_at: Date\n});\n\n// make this available to our users in our Node applications\nmodule.exports = mongoose.model('Group', groupSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/models/groups.js","module.exports = {\"access_token\":\"cf9be88f3d1b6c3ebba37445b43345f14f530915\",\"client_id\":\"24180\",\"client_secret\":\"d03c440b12e127955225e74d2b24dadf2e2b0cd2\",\"redirect_uri\":\"http://localhost:3000/auth/strava/callback\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/data/strava_config.json\n// module id = 20\n// module chunks = 0","/*eslint-disable*/\n\nmodule.exports = {\n\n    positionPointsFromPolyline: function(polyline, precision) {\n        var polylineDecode = function(str, precision) {\n            var index = 0,\n                lat = 0,\n                lng = 0,\n                coordinates = [],\n                shift = 0,\n                result = 0,\n                byte = null,\n                latitude_change,\n                longitude_change,\n                factor = Math.pow(10, precision || 5);\n        \n            // Coordinates have variable length when encoded, so just keep\n            // track of whether we've hit the end of the string. In each\n            // loop iteration, a single coordinate is decoded.\n            while (index < str.length) {\n        \n                // Reset shift, result, and byte\n                byte = null;\n                shift = 0;\n                result = 0;\n        \n                do {\n                    byte = str.charCodeAt(index++) - 63;\n                    result |= (byte & 0x1f) << shift;\n                    shift += 5;\n                } while (byte >= 0x20);\n        \n                latitude_change = ((result & 1) ? ~(result >> 1) : (result >> 1));\n        \n                shift = result = 0;\n        \n                do {\n                    byte = str.charCodeAt(index++) - 63;\n                    result |= (byte & 0x1f) << shift;\n                    shift += 5;\n                } while (byte >= 0x20);\n        \n                longitude_change = ((result & 1) ? ~(result >> 1) : (result >> 1));\n        \n                lat += latitude_change;\n                lng += longitude_change;\n        \n                coordinates.push([lat / factor, lng / factor]);\n            }\n        \n            return coordinates;\n        };\n\n        var path = polylineDecode(polyline, precision);\n    \n        var start = path[0];     \n        var end = path[path.length - 1];\n        \n        var edgePoints = {\n            startPoint: {\n                    position: {\n                lat: start[0],\n                lng: start[1]\n            }\n            },\n            \n            endPoint: {\n                    position: {\n                lat: end[0],\n                lng: end[1]\n            }\n            }\n        }\n        \n        return edgePoints\n        }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/map/polylineEdgePoints.js","/*eslint-disable*/\n\nvar AtoB = require('./activityFilters.js');\n\n\n// COMMENTS:\n\n// -- TEXT -- -> TEXT is heading or description of code block, start of code block\n// -- TEXT [END] -- -> end of code block\n\n// text -> text is description of code line\n\n// *text* -> text is variable\n// 'text' -> text is value of variable\n// \"text\" -> text is string\n\n\nmodule.exports = function(server, User, Activity, ActivityGroups){\n    \n    server.use('/api/activities/:timeRange/:mode', function (req, res, next) { \n\n        var mode = req.params.mode; // returning data mode from route ('all', [by id], other -> send \"empty\")\n        var timeRange = req.params.timeRange; //returning time range of activities from route ('daily', 'weekly', 'monthly' -> DEFAULT, 'yearly')\n\n        if(timeRange == 'daily'){\n            var time = new Date().setHours(0,0,0,0); // start of day\n        }\n        else if(timeRange == 'weekly'){\n            var curr = new Date;\n            var firstOfWeek = curr.getDate() - curr.getDay(); // first day is the day of the month - the day of the week\n            var time = new Date(curr.setDate(firstOfWeek)).setHours(0,0,0,0);  //start of week\n        }\n        else if(timeRange == 'monthly'){\n            var time = new Date().getTime() - 30 * 24 * 60 * 60 * 1000; // start of month\n        }\n        else if(timeRange == \"yearly\"){\n            var time = new Date(new Date().getFullYear(), 0, 1).setHours(0,0,0,0); // start of year\n        }\n        else{\n            var time = new Date().getTime() - 30 * 24 * 60 * 60 * 1000; // start of month\n        }\n\n        var radius = 100; //meters\n\n\n\n        var rad = function(x) {\n            return x * Math.PI / 180;\n          };\n          \n          var getDistance = function(p1, p2) {\n            var R = 6378137; // Earths mean radius in meter\n            var dLat = rad(p2.lat - p1.lat);\n            var dLong = rad(p2.lng - p1.lng);\n            var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(rad(p1.lat)) * Math.cos(rad(p2.lat)) *\n              Math.sin(dLong / 2) * Math.sin(dLong / 2);\n            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n            var d = R * c;\n            return d; // returns the distance in meter\n          };\n        \n        Activity.aggregate([\n            {\n                $match: {\n                    created_at: {$gt: new Date(time)},  // filter activities by date \n                    type: \"Ride\"  // filter activities by type\n                }\n            },\n            {\n                $group: {\n                    _id: \"$userId\", // group by user id\n                    activities: {\n                            $push: {\n                                    _id: \"$_id\",\n                                    distance: \"$distance\",\n                                    endPoint: \"$endPoint\",\n                                    endTime: \"$endTime\"\n                            }\n                    }\n\n                }\n            },\n            {\n                $lookup:\n                  {\n                    from: \"users\", // connecting to *users* collection (not model!!!)\n                    localField: \"_id\", // local field to compare from activities collection\n                    foreignField: \"_id\", // foreign field to compare from users collection\n                    as: \"userData\" // variable in which will data be written\n                  }\n            },\n            {\n                $unwind: '$userData'\n            },\n            {\n                $project: {\n                    userData: {\n                        __v: 0,\n                        created_at: 0,\n                        updated_at: 0,\n                    }\n                }\n            },\n            {\n                $group: {\n                    _id: \"$userData.groupId\", // grouping users by group id\n                    users: { \n                        $push: { // pushes each user in *users* array for each group id\n                            userId: \"$_id\",\n                            userData: \"$userData\",\n                            activities: \"$activities\"\n                        }\n                    } \n                }\n            },\n            {\n                $lookup:\n                  {\n                    from: \"groups\",\n                    localField: \"_id\",\n                    foreignField: \"_id\",\n                    as: \"groupInfo\"\n                  }\n            },\n            {\n                $unwind: '$groupInfo'\n            }\n\n        ], function (err, result) {\n            if (err) {\n                next(err);\n            } else {\n\n                var noUsers = [];\n                var loopGroups = 0;\n\n                result.forEach(function(group, groupIndex) {\n                    var noActivities = [];\n                    var loopUsers = 0;\n\n                    group.users.forEach(function(user, userIndex) {\n                        var notPass = [];\n                        var loopActivities = 0;\n\n                        var distance = 0;\n                        var activityCount = 0;\n                        user.activities.forEach(function(activity, index) {\n\n                            var AtoBdistance = {};\n                            var timeBox = {};\n\n                            if(group.groupInfo.locations[0]){\n                                AtoBdistance = AtoB.AtoBdistance(group.groupInfo.locations[0], activity.endPoint, group.groupInfo.maxDistance);\n                            }\n                            else{AtoBdistance.isInMaxRange = true}\n                            \n                            if(group.groupInfo.timeBox[0]){\n                                timeBox = AtoB.timeBox(group.groupInfo.timeBox, activity.endTime);\n                            }\n                            else{timeBox.isInAny = true}\n\n                            if(AtoBdistance.isInMaxRange == false){\n                                notPass.push(index);\n                            }\n                            else if(timeBox.isInAny == false){\n                                notPass.push(index);\n                            }\n                           \n                        })\n\n                        notPass.forEach(function(index) {\n                            index = index - loopActivities;\n                            user.activities.splice(index, 1);\n                            loopActivities = loopActivities + 1;\n                        })\n\n                        user.activities.forEach(function(activity) {\n                            distance = distance + activity.distance;\n                            activityCount = activityCount + 1;\n                        })\n\n                        if(distance == 0 && activityCount == 0){\n                            noActivities.push(userIndex);\n                        }else{\n                            user.distance = distance;\n                            user.activityCount = activityCount;\n                        }\n                        \n                    })\n\n                    noActivities.forEach(function(index) {\n                        index = index - loopUsers;\n                        group.users.splice(index, 1);\n                        loopUsers = loopUsers + 1;\n                    })\n\n                    if(group.users[0] == null){\n                        noUsers.push(groupIndex);\n                    }\n\n                })\n\n                noUsers.forEach(function(index) {\n                    index = index - loopGroups;\n                    result.splice(index, 1);\n                    loopGroups = loopGroups + 1;\n                })\n\n\n\n                //-- RETURNING DATA BY *mode* --\n\n                // checking if *mode* is group ID\n                var foundGroupId = false;\n                for(var i = 0; i < result.length; i++) {\n                    if (result[i]._id == mode) {\n                        foundGroupId = true;\n                        break;\n                    }\n                }\n\n                // checking if *mode* is 'all'\n                if(mode == 'all'){\n                    res.send(result);  // sending all results\n                }\n\n                // checking if *mode* doesn't exist\n                else if(mode == null){\n                    res.send(result);// sending all results\n                }\n\n                // if *mode* is group ID, sending activities of that group\n                else if(foundGroupId){\n                    result.forEach(function(group) { // serching for group by ID\n                        if(mode == group._id){\n                            res.send(group); //sending activities of group\n                        }\n                    });\n                }\n                else{\n                    res.status(200).json(\"empty\"); // anything else, send \"empty\"\n                }\n            }\n        });\n\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/activities/activities.js","/*eslint-disable*/\n\nmodule.exports = {\n    \n    AtoBdistance: function(location1, location2, maxRange){\n        \n          function toRad(x) {\n              return x * Math.PI / 180;\n            }\n        \n          var lat1 = location1.position.lat; \n          var lon1 = location1.position.lng;\n        \n          var lat2 = location2.position.lat; \n          var lon2 = location2.position.lng;\n        \n          var R = 6371000; // m \n        \n          var x1 = lat2-lat1;\n          var dLat = toRad(x1);  \n          var x2 = lon2-lon1;\n          var dLon = toRad(x2);  \n          var a = Math.sin(dLat/2) * Math.sin(dLat/2) + \n                          Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * \n                          Math.sin(dLon/2) * Math.sin(dLon/2);  \n          var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n          var d = R * c;\n          \n          var isInMaxRange;\n          var distance;\n          \n          if(d > maxRange){\n              isInMaxRange = false;\n          }\n          else{\n              isInMaxRange = true;\n          }\n          \n          var result = {\n            distance: d,\n            isInMaxRange: isInMaxRange\n          };\n          \n          return result;\n    },\n\n    timeBox: function(timeBoxArray, selectedTime){\n        function ISOtoDaySeconds(date){\n            var d = new Date(date);\n            var datetext = d.toTimeString();\n            \n            datetext = datetext.split(' ')[0]; // Take the first value from array\n\n            var a = datetext.split(':'); // split it at the colons\n            // minutes are worth 60 seconds. Hours are worth 60 minutes.\n            var seconds = (+a[0]) * 60 * 60 + (+a[1]) * 60 + (+a[2]); \n        \n            return seconds;\n        }\n\n        function HHandMMtoSec(timeString){\n            var hms = timeString;   // input string\n            var a = hms.split(':'); // split it at the colons\n\n            // minutes are worth 60 seconds. Hours are worth 60 minutes.\n            var seconds = (+a[0]) * 60 * 60 + (+a[1]) * 60;\n            \n            return seconds;\n        }\n\n        var time = ISOtoDaySeconds(selectedTime);\n        \n        var isInAny = false;\n        var passedTimeframesIndex = [];\n        \n        timeBoxArray.forEach(function(timeframe, index) {\n            var timeframeStart = HHandMMtoSec(timeframe.start);\n            var timeframeEnd = HHandMMtoSec(timeframe.end);\n\n            if(timeframeStart <= time && time <= timeframeEnd){\n                isInAny = true;\n                passedTimeframesIndex.push(index);\n            }\n            \n        })\n        \n        var timeframes = {\n        isInAny: isInAny,\n        passedTimeframeIndexes: passedTimeframesIndex\n        };\n        \n        return timeframes;\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/activities/activityFilters.js","/*eslint-disable*/\n\nmodule.exports = {\n\n  serverMiddleware: [\n      // Will register file from project api directory to handle /api/* requires\n      // { path: '/', handler: '~/server/api/logger.js' },\n  ],\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n      { rel: 'stylesheet', type: 'text/css', href: 'https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' },\n      { rel: 'preconnect', href: 'https://www.strava.com/login' }\n    ]\n  },\n  router: {\n    base: \"/\"\n  },\n  /*\n  ** Global CSS\n  */\n  css: ['~/assets/css/main.css'],\n  /*\n  ** Add axios globally\n  */\n  build: {\n    vendor: ['axios','vuetify'],\n    extractCSS: true,\n    /*\n    ** Run ESLINT on save\n    */\n    extend (config, ctx) {\n\n       if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n\n      if (!ctx.isClient) {\n        // This instructs Webpack to include `vue2-google-maps`'s Vue files\n        // for server-side rendering\n        config.externals.splice(0, 0, function (context, request, callback) {\n          if (/^vue2-google-maps($|\\/)/.test(request)) {\n            callback(null, false)\n          } else {\n            callback()\n          }\n        })\n      }\n\n    }\n  },\n\n  plugins: [\n      {src: '~plugins/vuetify'},\n      {src: '~plugins/googleMaps'},\n      {src: '~plugins/croppa'}\n      ],\n  /*\n  ** Load Vuetify CSS globally\n  */\n  css: ['~/assets/css/app.styl']\n  \n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}